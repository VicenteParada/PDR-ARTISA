<script>
  function renderData(data) {
    const container = document.getElementById("datos");

    if (!data || data.length === 0) {
      container.innerHTML = "<p>No hay datos disponibles.</p>";
      return;
    }

    // Formatear los datos en una tabla
    const table = document.createElement("table");
    const headers = Object.keys(data[0]);

    // Crear la fila de encabezados
    const headerRow = document.createElement("tr");
    headers.forEach(header => {
      const th = document.createElement("th");
      th.innerText = header;
      headerRow.appendChild(th);
    });
    table.appendChild(headerRow);

    // Crear las filas de datos
    data.forEach((row, index) => {
      const dataRow = document.createElement("tr");
      headers.forEach(header => {
        const td = document.createElement("td");

        if (header === "Fecha") {
          const [year, month, day] = row[header].split("T")[0].split("-");
          td.innerText = `${day}-${month}-${year}`; // Formato dd-mm-aaaa
        } else {
          td.innerText = row[header];
        }

        dataRow.appendChild(td);
      });
      dataRow.addEventListener("click", () => showPopup(row));
      table.appendChild(dataRow);
    });

    // Agregar la tabla al contenedor
    container.innerHTML = "";
    container.appendChild(table);
  }
</script>
